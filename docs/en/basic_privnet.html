<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Basic - Using a Private Net · neon-js</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Basic - Using a Private Net · neon-js"/><meta property="og:type" content="website"/><meta property="og:url" content="http://cityofzion.io/neon-js/index.html"/><meta property="og:description" content="This article describes the necessary setup required in order for `neon-js` to useful on a private net."/><link rel="shortcut icon" href="/neon-js/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/neon-js/browser.js"></script><link rel="stylesheet" href="/neon-js/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/neon-js/"><img class="logo" src="/neon-js/img/logo.svg"/><h2 class="headerTitle">neon-js</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/neon-js/docs/en/installation.html" target="_self">Docs</a></li><li><a href="/neon-js/docs/en/api-index.html" target="_self">API</a></li><li><a href="/neon-js/docs/en/changelog-latest.html" target="_self">Changelog</a></li><li><a href="/neon-js/en/help.html" target="_self">Help</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/neon-js/img/language.svg"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/neon-js/en">English</a></li><li><a href="/neon-js/zh-CN">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/installation.html">Installation</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/basic_sendasset.html">Basic - Sending assets</a></li><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/basic_claimgas.html">Basic - Claiming Gas</a></li><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/basic_createscript.html">Basic - Create Smart Contract Script</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/neon-js/docs/en/basic_privnet.html">Basic - Using a Private Net</a></li><li class="navListItem"><a class="navItem" href="/neon-js/docs/en/adv_multitx.html">Advanced - Sending multiple transactions in a block</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Basic - Using a Private Net</h1></header><article><div><span><p>This article describes the necessary setup required in order for <code>neon-js</code> to useful on a private net.</p>
<p>A private net is defined as a private instance of the NEO blockchain. It can be running either locally or on the cloud depending on your needs. It is useful for development work as it gives the developer all the GAS and NEO needed without having to beg and steal.</p>
<h2><a class="anchor" aria-hidden="true" name="infrastructure"></a><a href="#infrastructure" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Infrastructure</h2>
<p>As <code>neon-js</code> is a light wallet SDK, there are several pieces of infrastructure that should be in place in order for <code>neon-js</code> to be effective.</p>
<p>First, the private chain must be running and its RPC ports be open. The RPC ports are usually configured to be 10332 or 20332 depending on whether you are running a main net or test net configuration. If using HTTPS, the ports are usually 10331 or 20331. Do test this by doing a simple curl towards your private network:</p>
<pre><code class="hljs css sh">curl \
-H <span class="hljs-string">"Content-Type: application/json"</span> \
-X POST \
-d <span class="hljs-string">'{"jsonrpc":"2.0","id":"123","method":"getversion","params":[]}'</span> \
http://localhost:10332
</code></pre>
<p>If the NEO node is listening to that port, you should get something like:</p>
<pre><code class="hljs css sh">{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-string">"123"</span>,<span class="hljs-string">"result"</span>:{<span class="hljs-string">"port"</span>:10332,<span class="hljs-string">"nonce"</span>:771124497,<span class="hljs-string">"useragent"</span>:<span class="hljs-string">"\/NEO:2.7.3\/"</span>}}
</code></pre>
<p>Next, we need a data provider that can help aggregate the blockchain and provide us with the necessary information with a single API call. This is important as NEO uses the UTXO system for its native assets. This means that we need the references to every single transaction output that we have received in order to spend it.</p>
<p>Currently, this service is available as either neon-wallet-db or neoscan. Once this is setup, do check that your service is available through a curl request too as <code>neon-js</code> will be using HTTP requests to retrieve the data.</p>
<h2><a class="anchor" aria-hidden="true" name="adding-the-private-net"></a><a href="#adding-the-private-net" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding the private net</h2>
<p>Now that all this is done, we will prepare our <code>Network</code> class that will configure and inform <code>neon-js</code> about our private net. First, we create the following javascript object:</p>
<pre><code class="hljs css js"><span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'PrivateNet'</span>,
  <span class="hljs-attr">extra</span>: {
    <span class="hljs-attr">neoscan</span>: <span class="hljs-string">'http://localhost:4000/api/main_net'</span>
  }
}
</code></pre>
<p>For this example, we have a neoscan service setup serving our private net. The <code>name</code> field will be the name which we reference this in <code>neon-js</code>.</p>
<p>Now, we contruct the <code>Network</code> object and add it to our <code>networks</code>:</p>
<pre><code class="hljs css js"><span class="hljs-keyword">const</span> privateNet = <span class="hljs-keyword">new</span> rpc.Network(config)
Neon.add.network(privateNet)

Neon.api.neoscan.getBalance(<span class="hljs-string">'PrivateNet'</span>, address)
.then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(res))
</code></pre>
<p>We should be able to see a printout of the balance of the address if it is successful.</p>
<h2><a class="anchor" aria-hidden="true" name="notes"></a><a href="#notes" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Notes</h2>
<ul>
<li>If you are using docker to host everything (for example, relying on neoscan docker), the urls from <code>getRPCEndpoint</code> will not be reliable as they are local urls.</li>
<li>You might want to setup a startup script that imports <code>neon-js</code> and imports the network in.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="basic_createscript.html">← Basic - Create Smart Contract Script</a><a class="docs-next button" href="adv_multitx.html">Advanced - Sending multiple transactions in a block →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/neon-js/" class="nav-home"><img src="/neon-js/img/logo.svg" alt="neon-js" width="66" height="58"/></a><div><h5>Docs</h5><a href="/neon-js/docs/en/installation.html">Getting Started</a><a href="/neon-js/docs/en/tutorial.html">Guides</a><a href="/neon-js/docs/en/api.html">API Reference</a></div><div><h5>Community</h5><a href="/neon-js/en/users.html">User Showcase</a><a href="https://neo.stackexchange.com/" target="_blank">Stack Overflow</a><a href="https://discord.gg/wczVXTN">Discord Chat</a><a href="https://www.reddit.com/r/NEO/" target="_blank">NEO Reddit</a></div><div><h5>More</h5><a href="https://neo.org/" target="_blank">NEO</a><a href="https://github.com/cityofzion/neon-js" target="_blank">GitHub</a><a class="github-button" href="https://github.com/cityofzion/neon-js" data-icon="octicon-star" data-count-href="/cityofzion/neon-js/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="http://cityofzion.io" target="_blank" class="fbOpenSource"><img src="/neon-js/img/coz_med.png" alt="City of Zion" width="150" height="150"/></a><section class="copyright">Copyright © 2018 City of Zion</section></footer></div></body></html>